<template>
  <el-row class="header">
    <el-col :span="3" class="logo">
      <img src="@/assets/logo-small.png"/>
    </el-col>
    <el-col :span="5" :offset="16" class="menu">
      <el-menu
        class="el-menu"
        mode="horizontal"
        @select="handleSelect"
      >
        <!-- <el-menu-item index="1">
          <i class="el-icon-bell" />
        </el-menu-item> -->
        <el-submenu index="2">
          <template slot="title">
            <svg t="1573199334292" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2244" width="16" height="16"><path d="M657.739 298.976C630.552 239.57 592.047 185.646 544 140.18v178.837c38.96-2.403 77.063-9.18 113.739-20.04zM544 480h159.013c-2.575-41.63-10.15-82.234-22.302-121.102-43.598 13.335-89.394 21.637-136.711 24.228V480z m0 64v96.874c47.317 2.59 93.113 10.893 136.711 24.228 12.152-38.868 19.727-79.472 22.302-121.102H544z m0 339.82c48.047-45.466 86.552-99.389 113.739-158.796-36.676-10.86-74.779-17.637-113.739-20.04v178.837z m-64-564.804V140.179c-48.047 45.467-86.552 99.39-113.739 158.797 36.676 10.86 74.779 17.637 113.739 20.04zM320.987 480H480v-96.874c-47.317-2.59-93.113-10.893-136.711-24.228-12.152 38.868-19.727 79.472-22.302 121.102z m22.302 185.102c43.598-13.335 89.394-21.637 136.711-24.228V544H320.987c2.575 41.63 10.15 82.234 22.302 121.102zM480 883.821V704.984c-38.96 2.403-77.063 9.18-113.739 20.04C393.448 784.43 431.953 838.354 480 883.82zM512 64c150.96 0 284.48 74.666 365.647 189.082C929.512 326.193 960 415.536 960 512s-30.488 185.807-82.353 258.919l-0.237-0.195 0.237 0.195C796.48 885.334 662.96 960 512 960c-150.96 0-284.48-74.666-365.647-189.082C94.488 697.807 64 608.464 64 512s30.488-185.807 82.353-258.918C227.52 138.666 361.04 64 512 64z m-127.917 85.828c-54.456 19.211-103.888 50.532-144.678 91.674a509.327 509.327 0 0 0 66.6 35.402c20.522-45.844 46.86-88.516 78.078-127.076z m333.912 127.076a509.327 509.327 0 0 0 66.6-35.402c-40.79-41.142-90.222-72.463-144.678-91.674 31.217 38.56 57.556 81.232 78.078 127.076zM767.126 480h127.56c-5.778-70.03-30.347-134.733-68.654-189.053a574.601 574.601 0 0 1-85.179 45.798c14.533 45.551 23.552 93.564 26.273 143.255z m-26.273 207.255a574.605 574.605 0 0 1 85.179 45.798c38.307-54.32 62.876-119.022 68.654-189.053h-127.56c-2.72 49.69-11.74 97.704-26.273 143.255zM639.917 874.172c54.456-19.211 103.888-50.532 144.678-91.674a509.326 509.326 0 0 0-66.6-35.402c-20.522 45.844-46.86 88.516-78.078 127.076zM306.005 747.096a509.327 509.327 0 0 0-66.6 35.402c40.79 41.142 90.222 72.463 144.678 91.674-31.217-38.56-57.556-81.232-78.078-127.076zM256.874 544h-127.56c5.778 70.03 30.347 134.733 68.654 189.053a574.601 574.601 0 0 1 85.179-45.798c-14.533-45.551-23.552-93.564-26.273-143.255z m-58.906-253.053c-38.307 54.32-62.876 119.022-68.654 189.053H257l26-143-85.032-46.053z" fill="#000000" p-id="2245"></path></svg>
          </template>
          <el-menu-item v-for="i in languages" :key="i.value" :index="i.value">
            <template slot="title">
              <span v-html="i.icon"></span>
              <span>{{i.label}}</span>
            </template>
          </el-menu-item>
        </el-submenu>
        <el-submenu index="3">
          <template slot="title">Jon</template>
          <el-menu-item index="3-1">
            <template slot="title">
              <svg t="1573200292491" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2308" width="16" height="16"><path d="M801.469 307.63C786.431 158.27 662.45 41.37 512.219 41.37s-274.206 116.9-289.25 266.265c-76.117 16.828-133.525 89.194-133.525 175.664l0 318.162c0 98.889 75.101 179.351 167.411 179.351l510.74 0c92.309 0 167.405-80.463 167.405-179.351L935 483.299C935 396.829 877.592 324.463 801.469 307.63zM512.219 109.916c111.879 0 204.564 84.381 220.843 194.014L291.376 303.93C307.661 194.297 400.34 109.916 512.219 109.916zM867.845 801.461c0 61.095-44.972 110.805-100.251 110.805l-510.74 0c-55.284 0-100.262-49.709-100.262-110.805L156.592 483.299c0-61.108 44.978-110.823 100.262-110.823l510.74 0c55.279 0 100.251 49.716 100.251 110.823L867.845 801.461z" p-id="2309" fill="#707070"></path><path d="M476.066 605.066c-9.487 9.689-15.113 23.279-15.113 36.905 0 13.849 5.627 27.468 15.113 37.15 9.493 9.689 22.812 15.189 36.159 15.189 13.591 0 26.659-5.5 36.396-15.189 9.493-9.933 14.876-23.301 14.876-37.15 0-13.625-5.383-27.216-15.127-36.905C529.397 585.444 495.298 585.696 476.066 605.066z" p-id="2310" fill="#707070"></path></svg>
              <span> {{$t('menu.change_password')}}</span>
            </template>
          </el-menu-item>
          <el-menu-item index="3-2">
            <template slot="title">
              <svg t="1573200321294" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3105" width="16" height="16"><path d="M917.965523 917.331585c0 22.469758-17.891486 40.699957-39.913035 40.699957-22.058388 0-39.913035-18.2302-39.913035-40.699957l-0.075725-0.490164-1.087774 0c-18.945491-157.665903-148.177807-280.296871-306.821991-285.4748-3.412726 0.151449-6.751774 0.562818-10.240225 0.562818-3.450589 0-6.789637-0.410346-10.202363-0.524956-158.606321 5.139044-287.839661 127.806851-306.784128 285.436938l-1.014096 0 0.075725 0.490164c0 22.469758-17.854647 40.699957-39.913035 40.699957s-39.915082-18.2302-39.915082-40.699957l-0.373507-3.789303c0-6.751774 2.026146-12.903891 4.91494-18.531052 21.082154-140.712789 111.075795-258.241552 235.432057-312.784796C288.420387 530.831904 239.989351 444.515003 239.989351 346.604042c0-157.591201 125.33352-285.361213 279.924387-285.361213 154.62873 0 279.960203 127.770012 279.960203 285.361213 0 97.873098-48.391127 184.15316-122.103966 235.545644 124.843356 54.732555 215.099986 172.863023 235.808634 314.211285 2.437515 5.290493 4.01443 10.992355 4.01443 17.181311L917.965523 917.331585zM719.822744 346.679767c0-112.576985-89.544409-203.808826-199.983707-203.808826-110.402459 0-199.944821 91.232864-199.944821 203.808826s89.542362 203.808826 199.944821 203.808826C630.278335 550.488593 719.822744 459.256752 719.822744 346.679767z" p-id="3106" fill="#707070"></path></svg>
              <span> {{$t('menu.profile')}}</span>
            </template>
          </el-menu-item>
          <el-menu-item index="logout">
            <template slot="title">
              <svg t="1573199137968" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3157" width="16" height="16"><path d="M972.8 512l-307.2-256 0 153.6-358.4 0 0 204.8 358.4 0 0 153.6 307.2-256zM153.6 153.6l409.6 0 0-102.4-409.6 0c-56.32 0-102.4 46.08-102.4 102.4l0 716.8c0 56.32 46.08 102.4 102.4 102.4l409.6 0 0-102.4-409.6 0 0-716.8z" p-id="3158" fill="#d81e06"></path></svg>
              <span> {{$t('menu.logout')}}</span>
            </template>
          </el-menu-item>
        </el-submenu>
      </el-menu>
    </el-col>
  </el-row>
</template>

<script>
import loginModel from '@/models/loginModel'
import { CMS_LOGIN } from '@/common/routers'
import language from '@/config/languageConfig'
import { ref } from '@vue/composition-api'
export default {
  setup (props, { root }) {
    const languages = ref(language)
    const logout = async () => {
      await loginModel.logout()
      root.$router.replace(CMS_LOGIN)
      root.$message({
        message: root.$t('login.logout'),
        type: 'success'
      })
    }
    const changeLanguage = (l) => root.$i18n.setLocale(l)
    const handleSelect = (e) => {
      switch (e) {
        case 'logout':
          logout()
          break
        case 'zh_cn':
          changeLanguage('zh_cn')
          break
        case 'en':
          changeLanguage('en')
          break
        default:
          console.log('show e', e)
          break
      }
    }
    return {
      handleSelect,
      languages
    }
  }
}
</script>

<style lang="stylus" scoped>
.header
  .logo
    background-color #661a1a
    img
      height 100%
      max-height 8vh
      width auto
      max-width 100%
  text-align right
  max-height 100%
  min-height 100%
  .menu
    float right
    text-align right
    .el-menu
      float right
</style>
